<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>jasdb</id>
    <formats>
        <format>zip</format>
    </formats>
    <moduleSets>
        <moduleSet>
            <useAllReactorProjects>true</useAllReactorProjects>
            <includes>
                <include>com.oberasoftware:jasdb_restservice</include>
                <include>com.oberasoftware:jasdb_console</include>
                <include>com.oberasoftware:jasdb-service</include>
            </includes>
            <binaries>
                <outputDirectory>lib</outputDirectory>
                <outputFileNameMapping>${artifact.artifactId}.${artifact.extension}</outputFileNameMapping>
                <unpack>false</unpack>
                <excludes>
                    <exclude>com.oberasoftware:jasdb_android</exclude>
                    <exclude>com.google.android:android</exclude>
                    <exclude>org.khronos:opengl-api</exclude>
                    <exclude>com.github.tony19:apktool-lib</exclude>
                    <exclude>com.github.tony19:logback-android-classic</exclude>
                    <exclude>com.github.tony19:logback-android-core</exclude>
                </excludes>
            </binaries>
        </moduleSet>
        <moduleSet>
            <useAllReactorProjects>true</useAllReactorProjects>
            <includes>
                <include>com.obera:jasdb_restconnector</include>
            </includes>
            <binaries>
                <outputDirectory>restclient</outputDirectory>
                <outputFileNameMapping>${artifact.artifactId}.${artifact.extension}</outputFileNameMapping>
                <unpack>false</unpack>
                <includes>
                    <include>com.oberasoftware:*</include>
                    <include>com.sun.jersey:*</include>
                    <include>com.sun.jersey.contribs:*</include>
                    <include>org.codehaus.jackson:*</include>
                    <include>org.slf4j:*</include>
                    <include>ch.qos.logback:*</include>
                </includes>
                <excludes>
                    <exclude>com.oberasoftware:jasdb_android</exclude>
                    <exclude>com.oberasoftware:jasdb_localservice</exclude>
                    <exclude>com.oberasoftware:jasdb_transwriter</exclude>
                    <exclude>com.oberasoftware:jasdb_index_btreeplus</exclude>
                    <exclude>com.oberasoftware:jasdb_memorywriter</exclude>
                    <exclude>com.sun.jersey:jersey-server</exclude>
                    <exclude>com.oberasoftware:jasdb_index_btreeplus</exclude>
                </excludes>
            </binaries>
        </moduleSet>
    </moduleSets>

    <fileSets>
        <fileSet>
            <directory>../src/main/resources</directory>
            <includes>
                <include>**/*.xml</include>
            </includes>
            <outputDirectory>configuration</outputDirectory>
        </fileSet>
        <fileSet>
            <directory>../src/main/resources</directory>
            <includes>
                <include>**/*.sh</include>
                <include>**/*.bat</include>
                <include>**/*.txt</include>
            </includes>
            <outputDirectory>.</outputDirectory>
        </fileSet>
    </fileSets>

    <dependencySets>
        <dependencySet>
            <outputDirectory>androidlibs</outputDirectory>
            <scope>runtime</scope>
            <outputFileNameMapping>${artifact.artifactId}.${artifact.extension}</outputFileNameMapping>
            <includes>
                <include>com.google.inject:guice:jar:no_aop</include>
                <include>com.google.guava:guava</include>
                <include>aopalliance:aopalliance</include>
                <include>asm:asm</include>
                <include>org.codehaus.jackson:jackson-core-asl</include>
                <include>org.codehaus.jackson:jackson-mapper-asl</include>
                <include>javax.inject:javax.inject</include>
                <include>com.github.tony19:logback-android-core</include>
                <include>com.github.tony19:logback-android-classic</include>
                <include>org.slf4j:slf4j-api</include>
                <include>org.springframework:spring-core</include>
                <include>org.springframework.security:spring-security-core</include>
                <include>com.oberasoftware:jasdb_android</include>
                <include>com.oberasoftware:jasdb_localservice</include>
                <include>com.oberasoftware:jasdb_index_btreeplus</include>
                <include>com.oberasoftware:jasdb_core</include>
                <include>com.oberasoftware:jasdb_api</include>
                <include>com.oberasoftware:jasdb_transwriter</include>
            </includes>
        </dependencySet>
    </dependencySets>
</assembly>